<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <title>QualComp</title>
  <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
  <link href="/static/site.css" rel="stylesheet" type="text/css">
  <script src="/static/lib.max.js"></script>
  <script src="/ng/app.js"></script>
</head>
<body ng-app="app">
  <flash></flash>
  <div ng-controller="uploadCtrl" style="position: fixed; left: 0; width: 200px; border-right: 1px solid #555">
    <div style="margin: 2ex 1em">
      <input type="file" on-upload="uploadFile($file, $event)">
    </div>
    <ul style="font-size: 80%">
      <li ng-repeat="upload in uploads"
        ng-class="upload.filename == $storage.selected_filename ? 'selected' : 'unselected'"
        ng-click="$storage.selected_filename = upload.filename">
        <div class="overlay">
          <span class="white">{{upload.filename}}</span>
        </div>
        <img ng-src="/images/{{upload.filename}}" style="width: 100%">
      </li>
    </ul>
  </div>
  <div ng-controller="previewCtrl" style="margin-left: 210px">
    <div ng-repeat="variation in $storage.variations"
      variation="variation" filename="$storage.selected_filename"></div>

    <form ng-submit="$storage.variations.push({quality: $storage.quality, resize: $storage.resize})">
      <div>
        <label><b>Quality</b>
          <input type="number" min="0" max="100" ng-model="$storage.quality">
        </label>
      </div>
      <div>
        <label><b>Resize</b>
          <input type="text" ng-model="$storage.resize">
        </label>
      </div>
      <button>Add variation</button>
    </form>

    <div>
      <h3>Viewport</h3>
      <label><b>x</b>
        <input type="number" ng-model="$storage.viewport.x">
      </label>
      <label><b>y</b>
        <input type="number" ng-model="$storage.viewport.y">
      </label>
      <label><b>width</b>
        <input type="number" ng-model="$storage.viewport.width">
      </label>
      <label><b>height</b>
        <input type="number" ng-model="$storage.viewport.height">
      </label>
    </div>
  </div>
</body>
